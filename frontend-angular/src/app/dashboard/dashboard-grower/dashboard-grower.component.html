<div class="mode-selector">
  <button
    [ngClass]="{
      'btn-mode': true,
      'btn-mode-active': isDisplayCurrent,
      'btn-mode-inactive': !isDisplayCurrent
    }"
    (click)="setDisplayMode(1)"
  >
    Current
  </button>
  <button
    [ngClass]="{
      'btn-mode': true,
      'btn-mode-active': !isDisplayCurrent,
      'btn-mode-inactive': isDisplayCurrent
    }"
    (click)="setDisplayMode(0)"
  >
    History
  </button>
</div>

<hr />

<div *ngIf="isDisplayCurrent">
  <div class="room-container">
    <h1 class="title">room</h1>

    <div class="room-list">
      <div *ngFor="let room of lsRoom" class="each-room">
        <div class="cell-1">
          <h1>{{ room.roomLabel }}</h1>
        </div>
        <div class="cell-2">
          <h2>Temperature</h2>
          <h1 class="center">{{ getRoomTemperature(room.roomID) }} &#176;C</h1>
        </div>
        <div class="cell-3">
          <h2>Humidity</h2>
          <h1 class="center">{{ getRoomHumidity(room.roomID) }}%</h1>
        </div>
      </div>
    </div>
  </div>

  <div class="reservoir-container">
    <h1 class="title">Reservoir</h1>
    <div class="reservoir-list">
      <div *ngFor="let reservoir of lsReservoir" class="each-reservoir">
        <div class="center">
          <h1>{{ reservoir.reservoirLabel }}</h1>
        </div>

        <div class="center">
          <h2>TDS</h2>
          <h1>{{ getReservoirTds(reservoir.reservoirID) }} ppm</h1>
        </div>

        <div class="center">
          <h2>PH</h2>
          <h1>{{ getReservoirPh(reservoir.reservoirID) }}</h1>
        </div>

        <div class="center">
          <h2>Solution Temperature</h2>
          <h1>
            {{ getReservoirTemperatureSolution(reservoir.reservoirID) }}&#176;C
          </h1>
        </div>

        <div class="center">
          <h2>Solution Level</h2>
          <h1>{{ getReservoirSolutionLevel(reservoir.reservoirID) }}%</h1>
        </div>

        <div class="center">
          <h2>SV Nutrient</h2>
          <label class="switch">
            <input
              type="checkbox"
              (click)="onCLickSvNutrient(reservoir.reservoirID)"
              [checked]="getSvNutrientStatus(reservoir.reservoirID)"
            />
            <span class="slider"></span>
          </label>
        </div>

        <div class="center">
          <h2>SV Water</h2>
          <label class="switch">
            <input
              type="checkbox"
              (click)="onCLickSvWater(reservoir.reservoirID)"
              [checked]="getSvWaterStatus(reservoir.reservoirID)"
            />
            <span class="slider"></span>
          </label>
        </div>
      </div>
    </div>
  </div>

  <div class="module-container">
    <h1 class="title">Module</h1>
    <div class="module-list">
      <div *ngFor="let module of lsModule" class="each-module">
        <div class="cell-top">
          <div class="cell-a">
            <h1>{{ module.moduleLabel }}</h1>
          </div>
          <div class="cell-b">
            <h2>Auto</h2>
            <label class="switch">
              <input
                type="checkbox"
                (click)="onClickIsAuto(module.moduleID)"
                [checked]="getModuleIsAuto(module.moduleID)"
              />
              <span class="slider slider-auto"></span>
            </label>
          </div>
          <div class="cell-c">
            <div class="cell-c-1">
              <h2>Light:</h2>
            </div>
            <div class="cell-c-2">
              <h2>On</h2>
              <input type="number" />
              <h2>hr</h2>
            </div>
            <div class="cell-c-3">
              <h2>Off</h2>
              <input type="number" />
              <h2>hr</h2>
            </div>
            <div class="cell-c-4">
              <h2>Root Humidity:</h2>
            </div>
            <div class="cell-c-5">
              <h2>Low</h2>
              <input type="number" />
              <h2>hr</h2>
            </div>
            <div class="cell-c-6">
              <h2>High</h2>
              <input type="number" />
              <h2>hr</h2>
            </div>
          </div>
        </div>

        <div class="cell-level-background">
          <div
            *ngFor="let level of getLevelsArray(module.level)"
            class="cell-level"
          >
            <div class="cell-level-left">
              <div class="y-center">
                <h4>Level {{ level }}</h4>
              </div>
              <div class="center">
                <h3>Root Temperature</h3>
                <h1 class="white">
                  {{ getModuleTemperatureRoot(module.moduleID, level) }} &#176;C
                </h1>
              </div>
              <div class="center">
                <h3>Root Humidity</h3>
                <h1 class="white">
                  {{ getModuleHumidityRoot(module.moduleID, level) }}%
                </h1>
              </div>
            </div>

            <div class="cell-level-right">
              <div class="center">
                <h3>Fan</h3>
                <label class="switch">
                  <input
                    type="checkbox"
                    (click)="onClickFan(module.moduleID, level)"
                    [checked]="getFanStatus(module.moduleID, level)"
                  />
                  <span class="slider"></span>
                </label>
              </div>
              <div class="center">
                <h3>LED</h3>
                <label class="switch">
                  <input
                    type="checkbox"
                    (click)="onClickLed(module.moduleID, level)"
                    [checked]="getLedStatus(module.moduleID, level)"
                  />
                  <span class="slider"></span>
                </label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div *ngIf="!isDisplayCurrent">
  <div class="grower-history-container">
    <h1 class="title">History</h1>

    <form [formGroup]="growerHistoryForm">
      <div class="select-datetime">
        <h2 class="search-label">Begin:</h2>
        <input
          id="timeStampBegin"
          type="datetime-local"
          class="input input-timestamp"
          formControlName="timeStampBegin"
        />
        <h2 class="search-label">End:</h2>
        <input
          id="timeStampEnd"
          type="datetime-local"
          class="input input-timestamp"
          formControlName="timeStampEnd"
        />
        <button class="search-btn" (click)="onSubmitHistoryPeriod()">
          Update
        </button>
      </div>
    </form>

    <div *ngIf="isUpdateHistoryClicked">
      <div class="show-data-container">
        <h1 class="header">room</h1>
        <div *ngFor="let room of lsRoom">
          <h1 class="semi-header">{{ room.roomLabel }}</h1>

          <div *ngIf="recRoomID_recDataType_roomChartDataSet != undefined">
            <div class="show-data">
              <div class="left">
                <h2>Humidity</h2>
                <button class="btn btn-primary">Reset</button>
              </div>
              <div class="graph">
                <canvas
                  baseChart
                  [datasets]="
                    recRoomID_recDataType_roomChartDataSet[room.roomID][0]
                  "
                  [options]="humidityChartOptions"
                  [colors]="roomChartColors"
                  [chartType]="'line'"
                >
                </canvas>
              </div>
              <div class="left">
                <h2>Temperature</h2>
                <button class="btn btn-primary">Reset</button>
              </div>
              <div class="graph">
                <canvas
                  baseChart
                  [datasets]="
                    recRoomID_recDataType_roomChartDataSet[room.roomID][1]
                  "
                  [options]="tempChartOptions"
                  [colors]="roomChartColors"
                  [chartType]="'line'"
                >
                </canvas>
              </div>
            </div>
          </div>
          <div
            *ngIf="recRoomID_recDataType_roomChartDataSet == undefined"
            class="data-not-found"
          >
            <h5>no data</h5>
          </div>
        </div>
      </div>

      <div class="show-data-container">
        <h1 class="header">Reservoir</h1>
        <div *ngFor="let reservoir of lsReservoir">
          <h1 class="semi-header">{{ reservoir.reservoirLabel }}</h1>

          <div
            *ngIf="
              recReservoirID_recDataType_reservoirChartDataSet != undefined
            "
          >
            <div class="show-data">
              <div class="left">
                <h2>TDS</h2>
                <button class="btn btn-primary">Reset</button>
              </div>
              <div class="graph">
                <canvas
                  baseChart
                  [datasets]="
                    recReservoirID_recDataType_reservoirChartDataSet[
                      reservoir.reservoirID
                    ][0]
                  "
                  [options]="tdsChartOptions"
                  [colors]="reservoirChartColors"
                  [chartType]="'line'"
                >
                </canvas>
              </div>
              <div class="left">
                <h2>PH</h2>
                <button class="btn btn-primary">Reset</button>
              </div>
              <div class="graph">
                <canvas
                  baseChart
                  [datasets]="
                    recReservoirID_recDataType_reservoirChartDataSet[
                      reservoir.reservoirID
                    ][1]
                  "
                  [options]="phChartOptions"
                  [colors]="reservoirChartColors"
                  [chartType]="'line'"
                >
                </canvas>
              </div>
              <div class="left">
                <h2>Solution Temperature</h2>
                <button class="btn btn-primary">Reset</button>
              </div>
              <div class="graph">
                <canvas
                  baseChart
                  [datasets]="
                    recReservoirID_recDataType_reservoirChartDataSet[
                      reservoir.reservoirID
                    ][2]
                  "
                  [options]="solnTempChartOptions"
                  [colors]="reservoirChartColors"
                  [chartType]="'line'"
                >
                </canvas>
              </div>
            </div>
          </div>
          <div
            *ngIf="
              recReservoirID_recDataType_reservoirChartDataSet == undefined
            "
            class="data-not-found"
          >
            <h5>no data</h5>
          </div>
        </div>
      </div>

      <div class="show-data-container">
        <h1 class="header">Module</h1>
        <div *ngFor="let module of lsModule">
          <h1 class="semi-header">{{ module.moduleLabel }}</h1>
          <div *ngFor="let level of getLevelsArray(module.level)">
            <h1 class="sub-header">level {{ level }}</h1>

            <div
              *ngIf="
                recModuleID_recLevel_recDataType_moduleLevelChartDataSet !=
                undefined
              "
            >
              <div class="show-data">
                <div class="left">
                  <h2>Root Humidity</h2>
                  <button class="btn btn-primary">Reset</button>
                </div>
                <div class="graph">
                  <canvas
                    baseChart
                    [datasets]="
                      recModuleID_recLevel_recDataType_moduleLevelChartDataSet[
                        module.moduleID
                      ][level][0]
                    "
                    [options]="humidityRootChartOptions"
                    [colors]="moduleLevelChartColors"
                    [chartType]="'line'"
                  >
                  </canvas>
                </div>
                <div class="left">
                  <h2>Root Temperature</h2>
                  <button class="btn btn-primary">Reset</button>
                </div>
                <div class="graph">
                  <canvas
                    baseChart
                    [datasets]="
                      recModuleID_recLevel_recDataType_moduleLevelChartDataSet[
                        module.moduleID
                      ][level][1]
                    "
                    [options]="tempRootChartOptions"
                    [colors]="moduleLevelChartColors"
                    [chartType]="'line'"
                  >
                  </canvas>
                </div>
              </div>
            </div>
            <div
              *ngIf="
                recModuleID_recLevel_recDataType_moduleLevelChartDataSet ==
                undefined
              "
              class="data-not-found"
            >
              <h5>no data</h5>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
